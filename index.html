<!DOCTYPE html>
<meta name="robots" content="noindex">
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Watch Interaction (Final Optimized with Tooltips)</title>
    <script>
        (function(d) {
            var config = {
                kitId: 'eem0dom',
                scriptTimeout: 3000,
                async: true
            },
            h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
        })(document);
    </script>
    <style>
        /* ========== 전역 및 A 페이지 CSS ========== */
        :root {
            --btn-size: 80px;
            --z-video-bg: -100;
            --z-bg-a: 10;
            --z-button-layer: 30;
            --z-a-container: 20;
            --img-w: 150px;
            --z-tooltip: 50;
            --z-button-tooltip: 40;
        }
        * { box-sizing: border-box; }
        html, body { height: 100%; margin: 0; overflow: hidden; }
        body {
            cursor: none;
            cursor: url("cursor.png"), auto;
            background-image: url("cumil.gif");
            background-repeat: no-repeat;
            background-size: cover;
            transition: background-image 0.s ease;
            font-family: sans-serif;
        }

        /* A 페이지 컨테이너 */
        #page-a-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            opacity: 1;
            transition: opacity 0.1s ease;
            z-index: var(--z-a-container);
            pointer-events: auto;
        }
        #page-a-container.hidden {
            opacity: 0;
            pointer-events: none;
        }

        #bg-a {
            position: absolute; width: 100%; height: 100%;
            z-index: var(--z-bg-a);
            background: url(https://ifh.cc/g/dvInzK.png) center/cover;
            display: block;
        }

        .mask_img {
            transition: all 0.25s linear; height: 100%;
            background: url(https://i.imgur.com/Pm7JUsA.jpeg) center/cover;
        }

        /* ===== 버튼 레이어 ===== */
        #buttonLayer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: var(--z-button-layer);
        }

        .circle-btn {
            position: absolute;
            width: var(--btn-size);
            height: var(--btn-size);
            display: block;
            pointer-events: auto;
            transition: transform 0.2s ease;
        }
        .circle-btn img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }
        
        .pos-top { top: 28%; left: 52%; transform: translate(-50%, -50%); }
        .pos-right { top: 56%; left: 61%; transform: translate(-50%, -50%); }
        .pos-bottom { top: 75%; left: 49%; transform: translate(-50%, -50%); }
        .pos-left { top: 57%; left: 38%; transform: translate(-50%, -50%); }

        .button-tooltip {
            position: absolute;
            background-color: white; 
            color: black; 
            padding: 4px 9px;
            border-radius: 0; 
            font-size: 1em;
            white-space: nowrap; 
            pointer-events: none; 
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.0s, visibility 0.0s;
            z-index: var(--z-button-tooltip);
            transform: translate(-50%, -120%);
            font-family: 'Dongle', sans-serif; 
            border: 1px solid black; 
        }

        .button-tooltip.active {
            opacity: 1;
            visibility: visible;
        }

        #backBtn {
            position: fixed; 
            top: 20px; 
            right: 20px; 
            background-color: white; 
            color: black; 
            border: 1px solid black; 
            padding: 8px 12px; 
            border-radius: 0;
            font-size: 0.8em; 
            cursor: pointer;
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s;
            font-family: 'JJ Jikjigothic', sans-serif; 
            font-weight: 500; 
        }
        #backBtn.active { opacity: 1; visibility: visible; }

        #backBtnTooltip {
            position: fixed;
            left: 20px; 
            top: 20px; 
            background-color: white; 
            color: black; 
            padding: 11px 15px;
            border-radius: 0;
            border: 1px solid black;
            font-size: 0.9em; 
            line-height: 1.3;
            width: 360px;
            white-space: normal;
            text-align: left;
            font-family: 'JJ Jikjigothic', sans-serif;
            font-weight: 500;
            z-index: 998; 
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s;
        }

        #backBtnTooltip.active { opacity: 1; visibility: visible; }

        #main-intro-text {
            position: absolute;
            bottom: 50px; 
            right: 20px; 
            width: auto;
            max-width: 450px; 
            background-color: white; 
            border: 1px solid black; 
            padding: 8px 12px; 
            border-radius: 0;
            color: black;
            font-size: 1.2em;
            text-align: left;
            line-height: 1.4;
            font-family: 'Dongle', sans-serif; 
            white-space: normal; 
            z-index: var(--z-a-container);
        }

        /* ========== B 페이지 (Vimeo + 트래킹) CSS ========== */
        #background-b-container {
            background-color: black;
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 1s ease, visibility 1s;
            z-index: 1;
        }
        
        #background-b-container.active {
            opacity: 1;
            visibility: visible;
        }
        
        .video-background {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: var(--z-video-bg);
            overflow: hidden; pointer-events: none;
        }
        
        .video-background iframe {
            position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%;
            transform: translate(-50%, -50%);
        }
        
        #stage-b {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            overflow: hidden;
            cursor: none;
        }
        
        .thumb { position: absolute; width: var(--img-w); height: auto; box-shadow: 0 6px 20px rgba(0, 0, 0, 0); cursor: pointer; transform: translate(-50%, -50%) scale(1); transition: transform 0.5s ease-out, opacity 0.5s ease-out; opacity: 0; will-change: transform, opacity; }
        .thumb.active { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        .thumb.fading { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
    </style>
</head>
<body onload="startTypingAnimation()">

    <div id="page-a-container">
        <section id="bg-a">
            <div class="mask_img"></div>
        </section>

        <div id="buttonLayer" class="button-layer">
            <a href="./page1.html" target="_blank" class="circle-btn pos-top" data-tooltip="첫 번째 상단 메뉴로 이동">
                <img src="https://i.imgur.com/l1MPKoG.png" alt="Top Link">
                <span class="button-tooltip">다른 세계에서 보내는 편지</span>
            </a>
            <a href="./page2.html" target="_blank" class="circle-btn pos-right" data-tooltip="두 번째 우측 정보 확인">
                <img src="https://i.imgur.com/FAbEu4k.png" alt="Right Link">
                <span class="button-tooltip">새로운 세계</span>
            </a>
            <a href="./page3.html" target="_blank" class="circle-btn pos-bottom" data-tooltip="세 번째 하단 프로젝트 보기">
                <img src="https://i.imgur.com/ae5jFGl.png" alt="Bottom Link">
                <span class="button-tooltip">겹겹의 세계</span>
            </a>
            <a id="leftBtn" href="#" class="circle-btn pos-left" data-tooltip="트래킹 페이지로 이동">
                <img src="https://i.imgur.com/PNRcRT4.png" alt="Left Link">
                <span class="button-tooltip">겹쳐진 세계</span>
            </a>
        </div>
        <div id="main-intro-text"></div>
    </div>

    <button id="backBtn">이전으로</button>
    <div id="backBtnTooltip">이 웹 페이지는 인천에서 지낸 나의 개인적인 시간과 오래된 기억, 흐릿한 순간들이 겹쳐진 이미지로 나타난다. <br>선명하지 않은 기억의 조각들이 포개지며, 현실의 인천과 <br>기억 속 인천이 함께 존재하는 세계를 만들어 기억된다.</div> 

    <div id="background-b-container">
        <div class="video-background">
            <iframe
                src="https://player.vimeo.com/video/1147334813?autoplay=1&loop=1&background=1&muted=1&badge=0&autopause=0&player_id=0&app_id=58479"
                frameborder="0"
                allow="autoplay; fullscreen; picture-in-picture"
                allowfullscreen
                title="웹 동서남북">
            </iframe>
        </div>
        <main id="stage-b"></main>
    </div>
    <script src="https://player.vimeo.com/api/player.js"></script>
    <div id="mobileBlocker">DESKTOP ONLY</div>

<script>
// ===== B 페이지 데이터 =====
const works = [
    { name: "", title: "", url: "https://example.com/01", thumb: "https://i.imgur.com/Goo56Qk.jpeg" },
    { name: "", title: "", url: "https://example.com/02", thumb: "https://i.imgur.com/FBPNgUw.jpeg" },
    { name: "", title: "", url: "https://example.com/03", thumb: "https://i.imgur.com/x97QGQk.jpeg" },
    { name: "", title: "", url: "https://example.com/04", thumb: "https://i.imgur.com/N9WK60s.jpeg" },
    { name: "", title: "", url: "https://example.com/05", thumb: "https://i.imgur.com/R1UKFQK.jpeg" }, 
    { name: "", title: "", url: "https://example.com/06", thumb: "https://i.imgur.com/lHC8tlV.jpeg" },
    { name: "", title: "", url: "https://example.com/07", thumb: "https://i.imgur.com/X7Di1DT.jpeg" },
    { name: "", title: "", url: "https://example.com/08", thumb: "https://i.imgur.com/7yTivor.jpeg" },
    { name: "", title: "", url: "https://example.com/09", thumb: "https://i.imgur.com/u09P3t6.jpeg" }, 
    { name: "", title: "", url: "https://example.com/10", thumb: "https://i.imgur.com/0bHdKns.jpeg" },
    { name: "", title: "", url: "https://example.com/11", thumb: "https://i.imgur.com/SXfMA09.jpeg" }, 
    { name: "", title: "", url: "https://example.com/12", thumb: "https://i.imgur.com/2sRkaO2.jpeg" }, 
    { name: "", title: "", url: "https://example.com/13", thumb: "https://i.imgur.com/JTmZzU7.jpeg" }, 
    { name: "", title: "", url: "https://example.com/14", thumb: "https://i.imgur.com/QEhURyo.jpeg" },
    { name: "", title: "", url: "https://example.com/15", thumb: "https://i.imgur.com/LVr8l9C.jpeg" },
    { name: "", title: "", url: "https://example.com/16", thumb: "https://i.imgur.com/0NzkTNa.jpeg" }, 
    { name: "", title: "", url: "https://example.com/17", thumb: "https://i.imgur.com/oxwNcEX.jpeg" }, 
    { name: "", title: "", url: "https://example.com/18", thumb: "https://i.imgur.com/cR1d4an.jpeg" },
    { name: "", title: "", url: "https://example.com/19", thumb: "https://i.imgur.com/NQ2MonH.jpeg" }, 
    { name: "", title: "", url: "https://example.com/20", thumb: "https://i.imgur.com/9MptQF3.jpeg" }, 
    { name: "", title: "", url: "https://example.com/21", thumb: "https://i.imgur.com/DPPnQKn.jpeg" },
];

const stageB = document.getElementById('stage-b');
const pageAContainer = document.getElementById('page-a-container');
const bgBContainer = document.getElementById('background-b-container');
const backBtn = document.getElementById('backBtn');
const backBtnTooltip = document.getElementById('backBtnTooltip');
const leftBtn = document.getElementById('leftBtn');
const mainIntroTextElement = document.getElementById('main-intro-text'); 
const mainIntroText = '나는 이곳이 갑갑한 것이 아니라 <b>다른 세계가 필요하다</b>. 빠르게 변하는 신도시와 달리 인천의 구도심은 느린 시간과 겹겹의 문화가 남긴 깊은 향수를 품고 있다. <br>오래된 기억과 흐릿한 시간을 겹쳐 인천을 개인적인 네 가지의 관점으로 재해석했고,<br> 이를 <b>동·서·남·북 구조로 나눠 사용자가 직접 탐색</b>하도록 구성했다. 오래된 장소가 품은 다층적인 세계를 함께 바라보고 싶다.'; 
let typingTimer;

function typewriterEffect(element, text, speed) {
    if (typingTimer) clearTimeout(typingTimer);
    let charIndex = 0;
    let currentHtml = '';
    const chars = text.split(/(\<b\>.*?\<\/b\>)/g).filter(Boolean);
    function type() {
        if (charIndex < chars.length) {
            const part = chars[charIndex];
            if (part.startsWith('<b>') && part.endsWith('</b>')) {
                currentHtml += part;
                charIndex++;
            } else {
                const textPart = part;
                let textIndex = 0;
                function typeText() {
                    if (textIndex < textPart.length) {
                        currentHtml += textPart.charAt(textIndex);
                        element.innerHTML = currentHtml;
                        textIndex++;
                        typingTimer = setTimeout(typeText, 50);
                    } else {
                        charIndex++;
                        type();
                    }
                }
                typeText();
                return;
            }
            element.innerHTML = currentHtml;
            typingTimer = setTimeout(type, 50);
        }
    }
    element.innerHTML = '';
    type();
}

function startTypingAnimation() {
    typewriterEffect(mainIntroTextElement, mainIntroText, 50); 
}

window.addEventListener('load', startTypingAnimation);

const circleBtns = document.querySelectorAll('#buttonLayer .circle-btn');
circleBtns.forEach(btn => {
    const tooltip = btn.querySelector('.button-tooltip');
    btn.addEventListener('mouseenter', () => {
        btn.style.transform = 'translate(-50%, -50%) scale(1.2)';
        if (tooltip) tooltip.classList.add('active');
    });
    btn.addEventListener('mouseleave', () => {
        btn.style.transform = 'translate(-50%, -50%) scale(1)';
        if (tooltip) tooltip.classList.remove('active');
    });
});

let currentIdx = 0;
let lastX = 0;
let lastY = 0;
const distThreshold = 100;

function spawnImage(x, y) {
    const item = works[currentIdx];
    if (!item.thumb || item.thumb.trim() === '') {
        currentIdx = (currentIdx + 1) % works.length;
        return; 
    }
    const img = document.createElement('img');
    img.src = item.thumb;
    img.className = 'thumb';
    img.style.left = `${x}px`;
    img.style.top = `${y}px`;
    img.style.zIndex = 100 + currentIdx;
    img.addEventListener('click', (e) => {
        e.stopPropagation();
        window.open(item.url, '_blank', 'noopener');
    });
    stageB.appendChild(img);
    currentIdx = (currentIdx + 1) % works.length;
    requestAnimationFrame(() => { img.classList.add('active'); });
    setTimeout(() => {
        img.classList.remove('active');
        img.classList.add('fading');
    }, 1500);
    setTimeout(() => {
        if(img.parentNode) { stageB.removeChild(img); }
    }, 2000);
}

stageB.addEventListener('mousemove', (e) => {
    const mouseX = e.clientX;
    const mouseY = e.clientY;
    const dist = Math.hypot(mouseX - lastX, mouseY - lastY);
    if (dist > distThreshold) {
        spawnImage(e.clientX, e.clientY);
        lastX = mouseX;
        lastY = mouseY;
    }
});

leftBtn.addEventListener('click', function(event) {
    event.preventDefault();
    if (typingTimer) clearTimeout(typingTimer);
    mainIntroTextElement.innerHTML = mainIntroText;
    bgBContainer.style.visibility = 'visible';
    pageAContainer.classList.add('hidden');
    document.body.style.backgroundImage = 'none';
    setTimeout(() => {
        bgBContainer.classList.add('active');
        backBtn.classList.add('active'); 
        backBtnTooltip.classList.add('active'); 
        const vimeoIframe = document.querySelector('#background-b-container .video-background iframe');
        if (vimeoIframe) {
            const currentSrc = vimeoIframe.src;
            vimeoIframe.src = currentSrc;
        }
    }, 500);
});

backBtn.addEventListener('click', function() {
    bgBContainer.classList.remove('active');
    backBtn.classList.remove('active'); 
    backBtnTooltip.classList.remove('active'); 
    setTimeout(() => {
        pageAContainer.classList.remove('hidden');
        document.body.style.backgroundImage = 'url("cumil.gif")';
        startTypingAnimation();
        stageB.innerHTML = '';
        currentIdx = 0;
        bgBContainer.style.visibility = 'hidden';
    }, 1000);
});
</script>
</body>
</html>
